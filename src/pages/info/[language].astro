---
import Layout from "../../layouts/Layout.astro"
import { languages } from "../../data/languages"

import HTMLInfo from "../../content/info/html.md"
import CSSInfo from "../../content/info/css.md"
import PythonInfo from "../../content/info/python.md"
import ReactInfo from "../../content/info/react.md"

export async function getStaticPaths() {
  return languages.map((lang) => ({
    params: { language: lang.language }
  }))
}

const { language } = Astro.params

const selectedLanguage = languages.find((lang) => lang.language === language)

if (!selectedLanguage) {
  Astro.redirect("/404")
}

const markdownComponents = {
  HTML: HTMLInfo,
  CSS: CSSInfo,
  Python: PythonInfo,
  React: ReactInfo
}

const MarkdownComponent = markdownComponents[selectedLanguage.language]
---

<Layout
  title={selectedLanguage.title}
  description={selectedLanguage.description}
>
  <main>
    <h1>{selectedLanguage.title}</h1>
    <img src={selectedLanguage.imgSrc} alt={selectedLanguage.title} />
    <MarkdownComponent />
  </main>
</Layout>

<style>
  main {
    padding: 1rem;
  }
  img {
    margin: 0 auto;
    width: 100px;
    object-fit: contain;
    margin-bottom: 1rem;
  }
</style>
